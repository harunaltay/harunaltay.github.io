/*! For license information please see 5376.36d670fd.chunk.js.LICENSE.txt */
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5376],{84182:(e,n,t)=>{t.d(n,{$E:()=>a,Li:()=>l,QX:()=>r,Vf:()=>o,_v:()=>u,tI:()=>s});var i=t(42976),r=[i.lT.OPEN,i.lT.IN_REVIEW,i.lT.CHANGES_REQUESTED,i.lT.ACCEPTED,i.lT.CANCELLED,i.lT.REJECTED],a=[i.lT.OPEN,i.lT.IN_REVIEW,i.lT.CHANGES_REQUESTED],o=function(e){return!(!e||!a.includes(e))},u=function(e){return e===i.lT.ACCEPTED},l=function(e){return o(e)||u(e)},s=function(e){return e===i.lT.REJECTED||e===i.lT.CANCELLED}},66356:(e,n,t)=>{t.d(n,{c:()=>c});var i=t(54499),r=t(43253),a=t(53303),o=t(55127),u=t.n(o),l=t(96540),s=t(91271);function c(e){var n=e.hasPrefix,t=void 0!==n&&n,o=e.timestamp,c=e.testId,d=e.isShorthand,m=e.isSameYearShorthand,f=e.includeMinutesAgo,v=e.includeTimeOfDay,p=void 0!==v&&v,b=Date.now(),k=(0,i.A)(b,o),h=(0,r.A)(b,o);if(0===h){var y=(0,a.A)(b,o);if(f&&y>0){var g="".concat(y," ").concat(u()("min",y)," ago");return l.createElement(l.Fragment,null,g)}var E=t?"just now":"Just now";return l.createElement(l.Fragment,null,E)}if(h>=1&&h<24){var S=d?"".concat(h,"h ago"):"".concat(h," ").concat(u()("hour",h)," ago");return l.createElement(l.Fragment,null,S)}if(k>=1&&k<7){var N=d?"".concat(k,"d ago"):"".concat(k," ").concat(u()("day",k)," ago");return l.createElement(l.Fragment,null,N)}return(0,s.n9)({timestamp:o,testId:c,isShorthand:d,isSameYearShorthand:m,includeTimeOfDay:p})}},4369:(e,n,t)=>{t.d(n,{z:()=>w});var i,r=t(64467),a=t(5544),o=t(95420),u=t(96540),l=t(52764),s=t(14782),c=t(52290),d=t(86527),m=t(46445),f=t(20036),v=t(36557),p=t(91830);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},b.apply(null,arguments)}const k=function(e){return u.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,viewBox:"0 0 20 16"},e),i||(i=u.createElement("path",{d:"M0 .353v15.294h20V.353zm6.948 9.374L10 12.226l3.052-2.499 4.877 4.73H2.071zm-5.75 3.913V5.02l4.82 3.946zm12.784-4.675 4.82-3.946v8.621zm4.82-7.421v1.933L10 10.682 1.198 3.477V1.544z"})))};var h=t(60603),y={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}}]},g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendPostAsEmailsMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendPostAsEmails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}]}]}}]};function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function N(e){var n=e.post,t=e.onClick,i=e.menuStyle,r=(0,h.e)(!1),l=(0,a.A)(r,3),s=l[0],b=l[1],E=l[2],N=(0,p.zF)(),w=function(){E(),t()},O=(0,o.n)(g,{variables:{postId:(null==n?void 0:n.id)||""},onCompleted:function(e){var n=e.sendPostAsEmails;N(n?{message:"Your story has been emailed to subscribers.",toastStyle:"MESSAGE",duration:2e3}:{message:"We couldn't process your request. Try again, or contact our support team.",toastStyle:"ERROR",duration:2e3})},update:function(e,t){var i={id:"Post:".concat(null==n?void 0:n.id),fragment:y,fragmentName:"NewsletterV3EmailToSubscribersMenuItem_post"},r=e.readFragment(i);t.data&&r&&e.writeFragment(S(S({},i),{},{data:S(S({},r),{},{isAuthorNewsletter:t.data.sendPostAsEmails})}))}}),T=(0,a.A)(O,1)[0];return u.createElement(u.Fragment,null,u.createElement(c.a,{display:"inline-block"},"TEXT"===i?u.createElement(v.kZ,{scale:"M"},u.createElement(d.N,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=n&&n.isAuthorNewsletter?(N({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),t()):b()}},"Email to subscribers")):u.createElement(d.N,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=n&&n.isAuthorNewsletter?(N({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),t()):b()}},u.createElement(f.u,{icon:u.createElement(k,{"aria-label":"Email to subscribers"}),tooltipText:"Email to subscribers"}))),u.createElement(m.T,{onConfirm:function(){T(),w()},isVisible:s,hide:w,titleText:"Email to subscribers",confirmText:"Send",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!0,withCloseButton:!0,isDestructiveAction:!1},"A link to this story will be emailed to all your subscribers."))}function w(e){var n=e.post,t=e.onClick,i=e.menuStyle,r=e.paddingLeftRight,a=void 0===r?"20px":r;return u.createElement(l.c,null,(function(e){var r,o,l;return e&&e.id===(null==n||null===(r=n.creator)||void 0===r?void 0:r.id)&&(null==n||!n.isNewsletter)&&((null==n||null===(o=n.creator)||void 0===o||null===(l=o.newsletterV3)||void 0===l?void 0:l.subscribersCount)||0)>0?u.createElement(s.q3,{paddingTopBottom:"8px",paddingLeftRight:a},u.createElement(N,{post:n,onClick:t,menuStyle:i})):null}))}},8457:(e,n,t)=>{t.d(n,{m:()=>D});var i=t(96540),r=t(27721),a=t(86329),o=t(14782),u=t(86527),l=t(82284),s=t(10467),c=t(5544),d=t(95420),m=t(84182),f=t(34317),v=t(49287),p=t(42976),b=t(91830),k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WithdrawSubmissionMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"submissionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateSubmissionStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"submissionId"},value:{kind:"Variable",name:{kind:"Name",value:"submissionId"}}},{kind:"ObjectField",name:{kind:"Name",value:"status"},value:{kind:"EnumValue",value:"CANCELLED"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"status"}}]}}]}}]},h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WithdrawOrRemovePostViaCollectionMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateSubmissionStatusInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateSubmissionStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"status"}}]}}]}}]};function y(){var e=O(),n=e.m(y),t=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function i(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===t||"GeneratorFunction"===(n.displayName||n.name))}var r={throw:1,return:2,break:3,continue:3};function a(e){var n,t;return function(i){n||(n={stop:function(){return t(i.a,2)},catch:function(){return i.v},abrupt:function(e,n){return t(i.a,r[e],n)},delegateYield:function(e,r,a){return n.resultName=r,t(i.d,g(e),a)},finish:function(e){return t(i.f,e)}},t=function(e,t,r){i.p=n.prev,i.n=n.next;try{return e(t,r)}finally{n.next=i.n}}),n.resultName&&(n[n.resultName]=i.v,n.resultName=void 0),n.sent=i.v,n.next=i.n;try{return e.call(this,n)}finally{i.p=n.prev,i.n=n.next}}}return(y=function(){return{wrap:function(n,t,i,r){return e.w(a(n),t,i,r&&r.reverse())},isGeneratorFunction:i,mark:e.m,awrap:function(e,n){return new A(e,n)},AsyncIterator:w,async:function(e,n,t,r,o){return(i(n)?N:S)(a(e),n,t,r,o)},keys:E,values:g}})()}function g(e){if(null!=e){var n=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],t=0;if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}throw new TypeError((0,l.A)(e)+" is not iterable")}function E(e){var n=Object(e),t=[];for(var i in n)t.unshift(i);return function e(){for(;t.length;)if((i=t.pop())in n)return e.value=i,e.done=!1,e;return e.done=!0,e}}function S(e,n,t,i,r){var a=N(e,n,t,i,r);return a.next().then((function(e){return e.done?e.value:a.next()}))}function N(e,n,t,i,r){return new w(O().w(e,n,t,i),r||Promise)}function w(e,n){function t(i,r,a,o){try{var u=e[i](r),l=u.value;return l instanceof A?n.resolve(l.v).then((function(e){t("next",e,a,o)}),(function(e){t("throw",e,a,o)})):n.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return t("throw",e,a,o)}))}catch(e){o(e)}}var i;this.next||(T(w.prototype),T(w.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),T(this,"_invoke",(function(e,r,a){function o(){return new n((function(n,i){t(e,a,n,i)}))}return i=i?i.then(o,o):o()}),!0)}function O(){var e,n,t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function a(t,i,r,a){var l=i&&i.prototype instanceof u?i:u,s=Object.create(l.prototype);return T(s,"_invoke",function(t,i,r){var a,u,l,s=0,c=r||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return a=n,u=0,l=e,m.n=t,o}};function f(t,i){for(u=t,l=i,n=0;!d&&s&&!r&&n<c.length;n++){var r,a=c[n],f=m.p,v=a[2];t>3?(r=v===i)&&(l=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=f&&((r=t<2&&f<a[1])?(u=0,m.v=i,m.n=a[1]):f<v&&(r=t<3||a[0]>i||i>v)&&(a[4]=t,a[5]=i,m.n=v,u=0))}if(r||t>1)return o;throw d=!0,i}return function(r,c,v){if(s>1)throw TypeError("Generator is already running");for(d&&1===c&&f(c,v),u=c,l=v;(n=u<2?e:l)||!d;){a||(u?u<3?(u>1&&(m.n=-1),f(u,l)):m.n=l:m.v=l);try{if(s=2,a){if(u||(r="next"),n=a[r]){if(!(n=n.call(a,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,u<2&&(u=0)}else 1===u&&(n=a.return)&&n.call(a),u<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),u=1);a=e}else if((n=(d=m.n<0)?l:t.call(i,m))!==o)break}catch(n){a=e,u=1,l=n}finally{s=1}}return{value:n,done:d}}}(t,r,a),!0),s}var o={};function u(){}function l(){}function s(){}n=Object.getPrototypeOf;var c=[][i]?n(n([][i]())):(T(n={},i,(function(){return this})),n),d=s.prototype=u.prototype=Object.create(c);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,T(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=s,T(d,"constructor",s),T(s,"constructor",l),l.displayName="GeneratorFunction",T(s,r,"GeneratorFunction"),T(d),T(d,r,"Generator"),T(d,i,(function(){return this})),T(d,"toString",(function(){return"[object Generator]"})),(O=function(){return{w:a,m}})()}function T(e,n,t,i){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}T=function(e,n,t,i){function a(n,t){T(e,n,(function(e){return this._invoke(n,t,e)}))}n?r?r(e,n,{value:t,enumerable:!i,configurable:!i,writable:!i}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},T(e,n,t,i)}function A(e,n){this.v=e,this.k=n}var D=function(e){var n,t=e.post,l=e.submission,g=e.isPostAuthor,E=void 0!==g&&g,S=e.postActionCallback,N=(0,r.R)().value,w=t?function(e,n){return n&&e.creator&&n.id===e.creator.id}(t,N):E,O=(0,a.J)(null==t||null===(n=t.collection)||void 0===n?void 0:n.id).viewerEdge,T=null==O?void 0:O.isEditor,A=function(e){var n=(0,b.zF)(),t=(0,f.$L)(),i=(0,v.jI)(),r=(0,d.n)(h),a=(0,c.A)(r,2),o=a[0],u=a[1].loading,l=(null==e?void 0:e.collection)||(null==e?void 0:e.pendingCollection),m="withdrawn",k="withdrawing";null!=e&&e.pendingCollection||(m="removed",k="removing");var g=function(){n({message:"There was an error ".concat(k," the story from ").concat((null==l?void 0:l.name)||"this publication",". Please try again later."),toastStyle:"ERROR"})},E=function(){var r=(0,s.A)(y().mark((function r(){return y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,o({variables:{input:{postPublicationTuple:{postId:e.id,publicationId:null==l?void 0:l.id},status:p.lT.CANCELLED}},onCompleted:function(){n({message:"You have ".concat(m," your story from ").concat(l.name||"this publication")})},onError:function(){g()}});case 5:t.event("submission.postWithdrawn",{source:i,postId:e.id,collectionId:l.id}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(2),g();case 11:case"end":return r.stop()}}),r,null,[[2,8]])})));return function(){return r.apply(this,arguments)}}();return{collection:l,handler:E,loading:u,isPending:!(null==e||!e.pendingCollection)}}(t),D=A.collection,C=A.handler,P=A.loading,_=function(e){var n=(0,b.zF)(),t="withdrawn",i="withdrawing";(null==e?void 0:e.status)===p.lT.ACCEPTED&&(t="removed",i="removing");var r=function(){n({message:"There was an error ".concat(i," the story. Please try again later."),toastStyle:"ERROR"})},a=(0,d.n)(k,{update:function(e,n){var t,i;if("PublicationSubmission"===(null===(t=n.data)||void 0===t||null===(i=t.updateSubmissionStatus)||void 0===i?void 0:i.__typename)){var r=n.data.updateSubmissionStatus;e.modify({id:e.identify({__typename:"PublicationSubmission",id:r.id}),fields:{status:function(){return r.status}}})}}}),o=(0,c.A)(a,2),u=o[0],l=o[1].loading,f=function(){var i=(0,s.A)(y().mark((function i(){var a;return y().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e){i.next=2;break}return i.abrupt("return");case 2:return a=e.publication.name,i.prev=3,i.next=6,u({variables:{submissionId:e.id},onCompleted:function(){n({message:"You have ".concat(t," your story from ").concat(a)})},onError:function(){r()}});case 6:i.next=11;break;case 8:i.prev=8,i.t0=i.catch(3),r();case 11:case"end":return i.stop()}}),i,null,[[3,8]])})));return function(){return i.apply(this,arguments)}}();return{shouldUseWithdrawViaSubmission:!!e,handler:f,loading:l,isPending:(0,m.Vf)(null==e?void 0:e.status)}}(l),F=_.shouldUseWithdrawViaSubmission,j=_.handler,x=_.loading,I="Removing...",R="Remove from publication";if(w&&(I="Withdrawing...",R="Withdraw submission"),!(N&&(T||w)&&D||l))return null;var V=P||x;return i.createElement(o.q3,null,i.createElement(u.N,{onClick:function(){F?j():C(),S&&S()}},V?I:R))}},55981:(e,n,t)=>{t.d(n,{n:()=>u});var i=t(96540),r=t(44402),a=t(1417),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"24px",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"24px";return function(t){return{width:e,height:n,"& path":{fill:t.colorTokens.foreground.error.primary.base}}}},u=function(e){var n=e.width,t=e.height,u=(0,r.l)();return i.createElement(a.A,{className:u(o(n,t))})}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/5376.36d670fd.chunk.js.map